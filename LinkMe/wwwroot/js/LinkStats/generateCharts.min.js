function createClickChart(n){var i,r,u,t;prepareDateStats(n);i=am4core.create("clickChart",am4charts.XYChart);r=i.xAxes.push(new am4charts.DateAxis);r.title.text="Data kliknięcia";r.renderer.grid.template.location=0;r.renderer.minGridDistance=20;u=i.yAxes.push(new am4charts.ValueAxis);u.title.text="Liczba kliknięć";t=i.series.push(new am4charts.LineSeries);t.name="Kliknięcia";t.dataFields.dateX="clickDate";t.dataFields.valueY="count";t.fill="#02D3C7";t.stroke=am4core.color("#02d3c7");t.strokeWidth=2;t.tooltipText="{dateX}: [b]{valueY}[/]";t.bullets.push(new am4charts.CircleBullet);t.data=n;i.cursor=new am4charts.XYCursor}function createMapChart(n){var i=am4core.create("locationsMap",am4maps.MapChart),t,r;i.geodata=am4geodata_worldHigh;i.geodataNames=am4geodata_lang_PL;i.projections=new am4maps.projections.Mercator;t=i.series.push(new am4maps.MapPolygonSeries);t.heatRules.push({property:"fill",target:t.mapPolygons.template,min:am4core.color("#34dbd2"),max:am4core.color("#01938b")});t.useGeodata=!0;t.data=n;r=t.mapPolygons.template;r.tooltipText="{name}: [b]{value}[/]"}function prepareDateStats(n){for(var r,i,u,f,t=0;t<n.length-1;t++)r=n[t],i=new Date(r.clickDate),i.setDate(i.getDate()+1),u=n[t+1],f=new Date(u.clickDate),i.getTime()!==f.getTime()&&n.splice(t+1,0,{clickDate:i,count:0})}window.onload=()=>{var n=window.location.href.split("/")[4];await fetch(`https://localhost:44388/api/LinkStats/${n}`,{method:"GET"}).then(n=>{if(n.ok)return n.json();throw new Error(n.status);}).then(n=>{createClickChart(n.dateStatsDtos),createMapChart(n.regionDtos)}).catch(n=>{console.log("Error: ",n)})};